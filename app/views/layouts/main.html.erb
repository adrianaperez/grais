<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>
  <body>
    <header>
      <div class="navbar-fixed">
        <nav class="z-depth-0">
          <div class="nav__content">
            <div class="nav-wrapper">
              <a href="#" data-activates="slide-out" class="sidenavbar"><i class="material-icons left">menu</i></a>
              <%= link_to "LOGO", root_url, class:"brand-logo white-text left"%> 
              <a href="#" data-activates="mobile-demo" class="button-collapse hide-on-med-and-up right" style="padding: 0;">
                <div class="user-img">
                  <div class="wrapper-image">
                    <%= image_tag "Neuschwanstein.jpg"%>
                  </div>
                </div>
              </a>
              <a href="#!" class="hide-on-med-and-up right"><i class="material-icons right">add_alert</i></a>
              <ul class="right hide-on-small-only">
                <!-- Dropdown Trigger -->
                <li><a href="#!"><i class="material-icons right">add_alert</i></a></li>
                <li>
                  <%= link_to("#!", data:{activates:"dropdown1"}, class:"dropdown-button img-height-size") do %>
                    <div class="user-img">
                      <div class="wrapper-image">
                        <%= image_tag "Neuschwanstein.jpg"%>
                      </div>
                    </div>
                  <% end %>
                </li>
              </ul>
              <ul class="side-nav" id="mobile-demo">
                <li><%= link_to "Cerrar sesión", logout_path, method: "delete" %></li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
      <!-- Dropdown Structure -->
      <ul id="dropdown1" class="dropdown-content" style="margin-top: 64px;">
        <li class="divider"></li>
        <li><%= link_to "Perfil", user_path(current_user)%></li>
        <li class="divider"></li>
        <li><%= link_to "Cerrar sesión", logout_path, method: "delete" %></li>
      </ul>
    </header>
    <div id= "sidebar" class="hide-on-small-only">
      <%= yield :sidebar_option %>
    </div>
    <div id="parax" style="display: none; background-color: blue;">
      
    </div>
    <div id="menu" style="height: 48px; line-height: 48px;">
      <div id="submenu" style="width: 100%; height: 48px; z-index: 997; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 6px 20px 0 rgba(0, 0, 0, 0.1);">
        <%= yield :bar_option %>
      </div>
    </div>
    <main class="wrapper-main" style="padding-top: 20px; padding-left: 20px;">
      <%= content_for?(:main) ? yield(:main) : yield %>
    </main>
    
    <ul id="slide-out" class="side-nav">
      <li><div class="userView">
        <div class="background">
          <img src="images/office.jpg">
        </div>
        <a href="#!user"><img class="circle" src="images/yuna.jpg"></a>
        <a href="#!name"><span class="white-text name">John Doe</span></a>
        <a href="#!email"><span class="white-text email">jdandturk@gmail.com</span></a>
      </div></li>
      <li><a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a></li>
      <li><a href="#!">Second Link</a></li>
      <li><div class="divider"></div></li>
      <li><a class="subheader">Subheader</a></li>
      <li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
    </ul>
    
    <script type="text/javascript">
      $( document ).ready(function(){
        $('.modal').modal();

        //Sticky Header
        $(window).scroll(function(){
          var height_header = $("header").height();
          var p = $("#parax").height();
          var current_position = $(this).scrollTop();
          var position_menu = $("#menu").offset();
          console.log("*************************");
          console.log("menu: "+position_menu.top);
          console.log("scroll: "+current_position);
          console.log("p: "+p);
          console.log(height_header);
          if (current_position > p) {
            $("#submenu").addClass("pinned");
            $("#submenu").css("top", height_header);
          } else {
            $("#submenu").removeClass("pinned");
            $("#submenu").css("top", "auto");
          }
        });
      });
    </script>
  </body>
</html>