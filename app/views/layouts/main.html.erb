<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>
  <body>
    <header>
      <div class="navbar-fixed">
        <nav class="z-depth-0">
          <div class="nav__content">
            <div class="nav-wrapper">
              <%= link_to "LOGO", root_url, class:"brand-logo white-text left"%> 
              <a href="#" data-activates="mobile-demo" class="button-collapse hide-on-med-and-up right"><i class="material-icons white-text">menu</i></a>
              <a href="#!" class="hide-on-med-and-up right"><i class="material-icons right">add_alert</i></a>
              <ul class="right hide-on-small-only">
                <!-- Dropdown Trigger -->
                <li><a href="#!"><i class="material-icons right">add_alert</i></a></li>
                <li>
                  <%= link_to("#!", data:{activates:"dropdown1"}, class:"dropdown-button img-height-size") do %>
                    <div class="user-img">
                      <div class="wrapper-image">
                        <%= image_tag "Neuschwanstein.jpg"%>
                      </div>
                    </div>
                  <% end %>
                </li>
              </ul>
              <ul class="side-nav" id="mobile-demo">
                <li><%= link_to "Log out", logout_path, method: "delete" %></li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
      <!-- Dropdown Structure -->
      <ul id="dropdown1" class="dropdown-content" style="margin-top: 64px;">
        <li class="divider"></li>
        <li><%= link_to "Profile", user_path(current_user)%></li>
        <li class="divider"></li>
        <li><%= link_to "Log out", logout_path, method: "delete" %></li>
      </ul>
    </header>
    <div id= "sidebar" style="position: fixed; top: 64px; width: 250px; height: 100%; background-color: lightblue;">
      
    </div>
    <div id="parax" style="height: 100px; background-color: blue; margin-left: 250px;">
      
    </div>
    <div id="menu" style="height: 48px; margin-left: 250px; line-height: 48px;">
      <div id="submenu" style="width: 100%; height: 48px; background-color: grey;">
        
      </div>
    </div>
    <main class="wrapper-main" style="padding-top: 20px; margin-left: 250px;">
      <%= content_for?(:main) ? yield(:main) : yield %>
    </main>

    <script type="text/javascript">
      $( document ).ready(function(){
        //Sticky Header
        $(window).scroll(function(){
          var height_header = $("header").height();
          var p = $("#parax").height();
          var current_position = $(this).scrollTop();
          var position_menu = $("#menu").offset();
          console.log("menu"+position_menu.top);
          console.log(height_header);
          if (current_position > p) {
            $("#submenu").addClass("pinned");
            $("#submenu").css("top", height_header);
          } else {
            $("#submenu").removeClass("pinned");
            $("#submenu").css("top", "auto");
          }
        });
      });
    </script>
  </body>
</html>